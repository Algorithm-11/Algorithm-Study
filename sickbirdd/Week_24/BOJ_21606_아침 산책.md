## 소스코드

[클릭하면 백준 코드로 이동됩니다.](https://www.acmicpc.net/source/80579434)

## 소요시간

2시간

## 알고리즘

조합, BFS

## 풀이

### 발상
- 발상을 떠올리는 게 굉장히 힘들었던 문제였다. 
    - 트리의 특징을 제대로 알고 있어야 발상을 떠올릴 수 있다.
    - 특히 **트리는 두 노드간의 경로가 유일하다는 특징에 주목해야 한다.**
- 시작점과 끝점은 모두 실내여야 하며 경로 사이에 실내 장소가 포함되어 있으면 안된다.
    - 따라서, 시작점과 끝점을 제외하면 모두 **실외 장소**가 포함되어 있어야 한다.
- 처음에는 실외 장소끼리 연결되어 있는 간선에 따라서 경로의 수가 다양하게 나타날 수 있다고 생각했었다.
    - 하지만 앞서 말했던 트리의 특징을 생각해보면, **두 노드간의 경로가 유일하므로** 경로의 수는 오직 실내 장소의 개수로만 정해진다는 것을 알 수 있다.
    - 따라서 순열을 활용해서 시작점과 끝점을 선택하는 경우의 수만 고려해주면 된다.

### 구현
- 시작점과 끝점을 선택하는 경우의 수를 구하기 위해서는 실외 장소마다 연결되어 있는 실내 장소가 몇 가지인지 세줘야 한다.
- 하지만 실외 장소끼리 연결되어 있어서 실내 장소를 단순히 연결되어 있는 경우만 셀 경우, 답을 구할 수 없다.
- 따라서, BFS를 활용하여서 실내 장소의 수를 세주었다.
    - 이 때, 유의해야 하는 점은 이미 이전에 방문했었던 실외 장소들은 큐에 넣어줘야 하지만, 실내 장소는 큐에 넣어주면 안된다는 점이다. 
    - 왜냐하면 실내 장소는 경로에 포함되어 있으면 안되기 때문이다.
- 이렇게 실내 장소의 수를 세줬다면, 순열을 활용해 계산한 값을 경로의 수에 누적해서 더해주면 된다. 
    - `실내 장소의 수P2 = 실내 장소의 수 * (실내 장소의 수 - 1)`